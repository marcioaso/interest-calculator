import{m as delegateEvents,b as createSignal,n as getNextElement,C as setAttribute,t as insert,p as spread,q as mergeProps,h as createComponent,w as runHydrationEvents,F as For,x as template,d as createRenderEffect,D as className,G as setProperty,B as getNextMarker,T as Title}from"./index-BDriT34_.js";const styles={};var _tmpl$$7=template('<div class="flex mb-6 flex-col"><label class="text-left block mb-2 text-sm font-medium text-gray-900 dark:text-white"></label><div class="flex mb-6"><div class="relative w-full"><input></div><button class="flex-shrink-0 z-10 inline-flex items-center py-2.5 px-4 text-sm font-medium text-center text-gray-900 bg-gray-100 border border-gray-300 rounded-e-lg hover:bg-gray-200 focus:ring-4 focus:outline-none focus:ring-gray-100 dark:bg-gray-700 dark:hover:bg-gray-600 dark:focus:ring-gray-700 dark:text-white dark:border-gray-600"type=button></button><div class="z-10 hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-36 dark:bg-gray-700"><ul class="py-2 text-sm text-gray-700 dark:text-gray-200">'),_tmpl$2$2=template('<li><button type=button class="inline-flex w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-600 dark:hover:text-white"role=menuitem><div class="inline-flex items-center">');function NumberInputSelect({id:n,label:i,select:d,value:l,onKeyUp:a,onChange:t}){const[r,s]=createSignal(l),u=b=>{const o={...r(),selected:b};s(o),t&&t(o),a&&a(o)},x=b=>{const o={...r(),value:+b.target.value};s(o),t&&t(o),a&&a(o)};return(()=>{var b=getNextElement(_tmpl$$7),o=b.firstChild,f=o.nextSibling,g=f.firstChild,$=g.firstChild,m=g.nextSibling,p=m.nextSibling,y=p.firstChild;return setAttribute(o,"for",n),insert(o,i),spread($,mergeProps({get value(){return r().value}},a?{onKeyUp:x}:{},t?{onChange:x}:{},{type:"number",id:n,class:"block p-2.5 w-full z-20 text-sm text-gray-900 bg-gray-50 rounded-s-lg border-e-gray-50 border-e-2 border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-e-gray-700  dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:border-blue-500",required:!0}),!1,!1),setAttribute(m,"id",`${i}dropdown-fiat-number-button`),setAttribute(m,"data-dropdown-toggle",`${i}dropdown-fiat-number`),insert(m,()=>d[r().selected].label),setAttribute(p,"id",`${i}dropdown-fiat-number`),insert(y,createComponent(For,{each:d,children:_=>(()=>{var v=getNextElement(_tmpl$2$2),k=v.firstChild,h=k.firstChild;return v.$$click=()=>u(_.id),insert(h,()=>_.label),runHydrationEvents(),v})()})),runHydrationEvents(),b})()}delegateEvents(["click"]);var _tmpl$$6=template('<div class=mb-6><label class="text-left block mb-2 text-sm font-medium text-gray-900 dark:text-white"></label><input type=number class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">');function NumberInput(n){const{label:i,select:d}=n,l=(n.label||"")+Math.random();return d?createComponent(NumberInputSelect,mergeProps({id:l},n)):(()=>{var a=getNextElement(_tmpl$$6),t=a.firstChild,r=t.nextSibling;return setAttribute(t,"for",l),insert(t,i),setAttribute(r,"id",l),spread(r,n,!1,!1),runHydrationEvents(),a})()}const initialPeriodOptions=[{id:0,label:"Years"},{id:1,label:"Months"}],initialState={initial:0,installment:0,interest:0,incomeTax:0,period:{value:0,selected:0}},[form,setForm]=createSignal(initialState),[transactions,setTransactions]=createSignal([]),[results,setResults]=createSignal([]);Number.prototype.d=function(){return+this.toFixed(2)};const calculator=(n,i,d,l,a,t=[])=>{console.log("**** transactions",t);const r=[{row:0,info:{total:n,interest:0,invested:n},balance:{gross:0,incometax:0,net:0}}];let s=+n,u=+n,x=0;const b=d/100;for(let o=1;o<l+1;o++){const g=u*Math.pow(1+b,.08333333333333333)-u,$=t[o]?t[o].value:i;s+=$,x+=g;const m=g*(a/100),p=g-m;r.push({row:o,info:{total:(s+x).d(),interest:x.d(),invested:s},balance:{gross:g.d(),incometax:m.d(),net:p.d()}}),u+=$+g}return r},calculateForm=()=>{const n=form(),{period:i,initial:d,interest:l,incomeTax:a,installment:t}=n,r=i.selected?1:12,s=calculator(d,t,l,i.value*r,a,transactions()).reverse();setResults(s)},formatter=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),c=n=>formatter.format(n),absDecimals=n=>c(n).slice(1);var _tmpl$$5=template("<button>");Number.prototype.fixed=function(){return`${absDecimals(this)}`};function TransactionButton({index:n,result:i}){const d=t=>{const r=prompt(`Transaction on month ${t}`,0),s=[...transactions()];let u=+r;isNaN(u)&&(u=0),s[t]=u!==0?{row:t,value:+r}:void 0,setTransactions(s),calculateForm()},l=()=>{const t=transactions();if(!t)return"p-2 text-white";const{row:r}=i,s=t[r];return!s||s.value===0?"p-2 text-white":s.value>0?"p-2 text-green-700 text-xs":"p-2 text-red-700 text-xs"},a=()=>{if(n===0||i.row===0)return"âˆž";const t=transactions();if(!t)return"+";const{row:r}=i,s=t[r];return!s||s.value===0?"+":s.value.fixed()};return(()=>{var t=getNextElement(_tmpl$$5);return t.$$click=()=>d(i.row),insert(t,a),createRenderEffect(r=>{var s=l(),u=n===0||i.row===0;return s!==r.e&&className(t,r.e=s),u!==r.t&&setProperty(t,"disabled",r.t=u),r},{e:void 0,t:void 0}),runHydrationEvents(),t})()}delegateEvents(["click"]);var _tmpl$$4=template('<thead><tr class=bg-slate-700><td class="w-12 p-3">Month</td><td class="w-22 bg-green-700">Net</td><td class="w-22 bg-red-700">Tax</td><td class="w-22 bg-sky-700">Gross</td><td class="w-22 bg-yellow-950">Invested</td><td class="w-22 bg-green-800">Interest</td><td class=bg-green-950>Total');function THead(){return getNextElement(_tmpl$$4)}var _tmpl$$3=template('<div class="w-full mb-3 md:grid-cols-2"><div class="flex border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-900 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"><label class=p-2.5>One line calculator</label><input class="flex-auto bg-transparent text-gray-400 text-sm text-right p-2.5 dark:bg-transparent dark:placeholder-gray-100 dark:text-white outline-none"placeholder=0><div class="min-w-28 p-2.5 text-base dark:text-gray-400">= <!$><!/>');function OneLineCalculator(){const[calc,setCalc]=createSignal(0),handleInputChange=e=>{const{target:{value}}=e;try{const result=eval(value)||0;setCalc(result)}catch(n){setCalc("Err")}},handleOnKeyUp=n=>{n.keyCode===13&&handleInputChange(n)};return(()=>{var n=getNextElement(_tmpl$$3),i=n.firstChild,d=i.firstChild,l=d.nextSibling,a=l.nextSibling,t=a.firstChild,r=t.nextSibling,[s,u]=getNextMarker(r.nextSibling);return l.$$keyup=handleOnKeyUp,l.addEventListener("blur",handleInputChange),insert(a,()=>`${calc()}`,s,u),runHydrationEvents(),n})()}delegateEvents(["keyup"]);var _tmpl$$2=template('<div class=px-4><table class="w-full border-b-stone-300 border-b-2"><!$><!/><tbody><tr><td class=p-3></td><td class=text-green-400></td><td class=text-red-400></td><td class=text-sky-400></td><td class=text-yellow-400></td><td class=text-green-600></td><td class=text-green-700>'),_tmpl$2$1=template('<div><div class="px-4 pt-2"></div><!$><!/>');let shouldShowBanner=!0;function TopBanner(){const[n,i]=createSignal(shouldShowBanner);try{window.addEventListener("scroll",l=>{const a=document.getElementById("results");if(!a)return;const t=a.offsetTop<window.scrollY;shouldShowBanner!==t&&(i(t),shouldShowBanner=t,console.log(t))})}catch{console.log("ssr")}const d=()=>{const l=results();if(!l.length)return"";const a=l[0],{row:t,balance:r,info:s}=a,{net:u,incometax:x,gross:b}=r,{total:o,interest:f,invested:g}=s;return(()=>{var $=getNextElement(_tmpl$$2),m=$.firstChild,p=m.firstChild,[y,_]=getNextMarker(p.nextSibling),v=y.nextSibling,k=v.firstChild,h=k.firstChild,C=h.nextSibling,N=C.nextSibling,w=N.nextSibling,E=w.nextSibling,I=E.nextSibling,T=I.nextSibling;return insert(m,createComponent(THead,{}),y,_),insert(h,t),insert(C,()=>c(u)),insert(N,()=>c(x)),insert(w,()=>c(b)),insert(E,()=>c(g)),insert(I,()=>c(f)),insert(T,()=>c(o)),$})()};return(()=>{var l=getNextElement(_tmpl$2$1),a=l.firstChild,t=a.nextSibling,[r,s]=getNextMarker(t.nextSibling);return insert(a,createComponent(OneLineCalculator,{})),insert(l,d,r,s),createRenderEffect(()=>className(l,`
                fixed
                top-0
                right-0
                w-full
                block
                bg-black
                ${n()?"":"hidden"}
            `)),l})()}var _tmpl$$1=template("<div class=flex><table id=results class=flex-1><!$><!/><tbody>"),_tmpl$2=template("<tr class=odd:bg-slate-900><td class=p-3></td><td class=text-green-400></td><td class=text-red-400></td><td class=text-sky-400></td><td class=text-yellow-400><!$><!/><!$><!/></td><td class=text-green-600></td><td class=text-green-700>");function Info(){return[createComponent(TopBanner,{}),(()=>{var n=getNextElement(_tmpl$$1),i=n.firstChild,d=i.firstChild,[l,a]=getNextMarker(d.nextSibling),t=l.nextSibling;return insert(i,createComponent(THead,{}),l,a),insert(t,createComponent(For,{get each(){return results()},children:(r,s)=>(()=>{var u=getNextElement(_tmpl$2),x=u.firstChild,b=x.nextSibling,o=b.nextSibling,f=o.nextSibling,g=f.nextSibling,$=g.firstChild,[m,p]=getNextMarker($.nextSibling),y=m.nextSibling,[_,v]=getNextMarker(y.nextSibling),k=g.nextSibling,h=k.nextSibling;return insert(x,()=>r.row),insert(b,()=>c(r.balance.net)),insert(o,()=>c(r.balance.incometax)),insert(f,()=>c(r.balance.gross)),insert(g,()=>c(r.info.invested),m,p),insert(g,createComponent(TransactionButton,{get index(){return s()},result:r}),_,v),insert(k,()=>c(r.info.interest)),insert(h,()=>c(r.info.total)),u})()})),n})()]}var _tmpl$=template('<main class=text-white><!$><!/><h1 class="mb-4 text-4xl font-extrabold leading-none tracking-tight text-gray-900 md:text-5xl lg:text-6xl dark:text-white">Compound Insterest Calculator</h1><!$><!/><div><header><form><div class="grid gap-6 mb-6 md:grid-cols-5"><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/></div></form><!$><!/>');function HomeView(){const n=d=>l=>{const a=form(),{value:t}=l.target;t&&(setForm({...a,[d]:+t||0}),calculateForm())},i=d=>{setForm({...form(),period:d}),calculateForm()};return(()=>{var d=getNextElement(_tmpl$),l=d.firstChild,[a,t]=getNextMarker(l.nextSibling),r=a.nextSibling,s=r.nextSibling,[u,x]=getNextMarker(s.nextSibling),b=u.nextSibling,o=b.firstChild,f=o.firstChild,g=f.firstChild,$=g.firstChild,[m,p]=getNextMarker($.nextSibling),y=m.nextSibling,[_,v]=getNextMarker(y.nextSibling),k=_.nextSibling,[h,C]=getNextMarker(k.nextSibling),N=h.nextSibling,[w,E]=getNextMarker(N.nextSibling),I=w.nextSibling,[T,F]=getNextMarker(I.nextSibling),H=f.nextSibling,[P,O]=getNextMarker(H.nextSibling);return insert(d,createComponent(Title,{children:"Interest calculator"}),a,t),insert(d,createComponent(OneLineCalculator,{}),u,x),insert(g,createComponent(NumberInput,{min:0,get value(){return form().initial},required:!0,label:"Initial investment",get onKeyUp(){return n("initial")}}),m,p),insert(g,createComponent(NumberInput,{min:0,get value(){return form().installment},required:!0,label:"Installment",get onKeyUp(){return n("installment")}}),_,v),insert(g,createComponent(NumberInput,{min:0,get value(){return form().interest},required:!0,label:"Interest yearly %",suffix:"%",step:".01",get onKeyUp(){return n("interest")}}),h,C),insert(g,createComponent(NumberInput,{min:0,get value(){return form().period},required:!0,label:"Period",onChange:i,select:initialPeriodOptions}),w,E),insert(g,createComponent(NumberInput,{min:0,get value(){return form().incomeTax},required:!0,label:"Income tax %",step:".01",get onKeyUp(){return n("incomeTax")}}),T,F),insert(o,createComponent(Info,{}),P,O),createRenderEffect(S=>{var M=styles.App,B=styles.header;return M!==S.e&&className(b,S.e=M),B!==S.t&&className(o,S.t=B),S},{e:void 0,t:void 0}),d})()}function Home(){return createComponent(HomeView,{})}export{Home as default};
