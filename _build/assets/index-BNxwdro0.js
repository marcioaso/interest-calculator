import{m as delegateEvents,b as createSignal,n as getNextElement,C as setAttribute,t as insert,p as spread,q as mergeProps,h as createComponent,w as runHydrationEvents,F as For,x as template,D as setProperty,d as createRenderEffect,G as className,B as getNextMarker,T as Title}from"./index-BW6z15uB.js";const styles={};var _tmpl$$8=template('<div class="flex mb-6 flex-col"><label class="text-left block mb-2 text-sm font-medium text-gray-900 dark:text-white"></label><div class="flex mb-6"><div class="relative w-full"><input></div><button class="flex-shrink-0 z-10 inline-flex items-center py-2.5 px-4 text-sm font-medium text-center text-gray-900 bg-gray-100 border border-gray-300 rounded-e-lg hover:bg-gray-200 focus:ring-4 focus:outline-none focus:ring-gray-100 dark:bg-gray-700 dark:hover:bg-gray-600 dark:focus:ring-gray-700 dark:text-white dark:border-gray-600"type=button></button><div class="z-10 hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-36 dark:bg-gray-700"><ul class="py-2 text-sm text-gray-700 dark:text-gray-200">'),_tmpl$2$2=template('<li><button type=button class="inline-flex w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-600 dark:hover:text-white"role=menuitem><div class="inline-flex items-center">');function NumberInputSelect({id:r,label:i,select:s,value:l,onKeyUp:t,onChange:n}){const[a,d]=createSignal(l),x=u=>{const o={...a(),selected:u};d(o),n&&n(o),t&&t(o)},p=u=>{const o={...a(),value:+u.target.value};d(o),n&&n(o),t&&t(o)};return(()=>{var u=getNextElement(_tmpl$$8),o=u.firstChild,m=o.nextSibling,g=m.firstChild,$=g.firstChild,b=g.nextSibling,v=b.nextSibling,_=v.firstChild;return setAttribute(o,"for",r),insert(o,i),spread($,mergeProps({get value(){return a().value}},t?{onKeyUp:p}:{},n?{onChange:p}:{},{type:"number",id:r,class:"block p-2.5 w-full z-20 text-sm text-gray-900 bg-gray-50 rounded-s-lg border-e-gray-50 border-e-2 border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-e-gray-700  dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:border-blue-500",required:!0}),!1,!1),setAttribute(b,"id",`${i}dropdown-fiat-number-button`),setAttribute(b,"data-dropdown-toggle",`${i}dropdown-fiat-number`),insert(b,()=>s[a().selected].label),setAttribute(v,"id",`${i}dropdown-fiat-number`),insert(_,createComponent(For,{each:s,children:f=>(()=>{var h=getNextElement(_tmpl$2$2),k=h.firstChild,y=k.firstChild;return h.$$click=()=>x(f.id),insert(y,()=>f.label),runHydrationEvents(),h})()})),runHydrationEvents(),u})()}delegateEvents(["click"]);var _tmpl$$7=template('<div class=mb-6><label class="text-left block mb-2 text-sm font-medium text-gray-900 dark:text-white"></label><input type=number class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">');function NumberInput(r){const{label:i,select:s}=r,l=(r.label||"")+Math.random();return s?createComponent(NumberInputSelect,mergeProps({id:l},r)):(()=>{var t=getNextElement(_tmpl$$7),n=t.firstChild,a=n.nextSibling;return setAttribute(n,"for",l),insert(n,i),setAttribute(a,"id",l),spread(a,r,!1,!1),runHydrationEvents(),t})()}const initialPeriodOptions=[{id:0,label:"Years"},{id:1,label:"Months"}],initialState={initial:0,installment:0,interest:0,incomeTax:0,period:{value:0,selected:0}},[form,setForm]=createSignal(initialState),[transactions,setTransactions]=createSignal([]),[results,setResults]=createSignal([]),[breakInstallments,setBreakInstallments]=createSignal(-1);Number.prototype.d=function(){return+this.toFixed(2)};const calculator=(r,i,s,l,t,n=[],a=-1)=>{const d=[{row:0,info:{total:r,interest:0,invested:r},balance:{gross:0,incometax:0,net:0}}];let x=+r,p=+r,u=0;const o=s/100;for(let m=1;m<l+1;m++){const $=p*Math.pow(1+o,.08333333333333333)-p,b=a,v=b>-1&&m>b;let _=n[m]?n[m].value:i;v&&(_=0),x+=_,u+=$;const f=$*(t/100),h=$-f;d.push({row:m,info:{total:(x+u).d(),interest:u.d(),invested:x},balance:{gross:$.d(),incometax:f.d(),net:h.d()}}),p+=_+$}return d},calculateForm=()=>{const r=form();console.log("((( ",breakInstallments());const{period:i,initial:s,interest:l,incomeTax:t,installment:n}=r,a=i.selected?1:12,d=calculator(s,n,l,i.value*a,t,transactions(),breakInstallments()).reverse();setResults(d)},formatter=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),c=r=>formatter.format(r),absDecimals=r=>c(r).slice(1);var _tmpl$$6=template("<button>");Number.prototype.fixed=function(){return`${absDecimals(this)}`};function TransactionButton({index:r}){const i=t=>{const n=prompt(`Transaction on month ${t}`,0),a=[...transactions()];let d=+n;isNaN(d)&&(d=0),a[r]=d!==0?{row:t,value:+n}:void 0,setTransactions(a),calculateForm()},s=()=>{const t=transactions();if(!t)return"p-2 text-white";const n=t[r];return!n||n.value===0?"p-2 text-white":n.value>0?"p-2 text-green-700 text-xs":"p-2 text-red-700 text-xs"},l=()=>{if(r===0)return"âˆž";const t=transactions();if(!t)return"+";const n=t[r];return!n||n.value===0?"+":n.value.fixed()};return(()=>{var t=getNextElement(_tmpl$$6);return t.$$click=()=>i(r),setProperty(t,"disabled",r===0),insert(t,l),createRenderEffect(()=>className(t,s())),runHydrationEvents(),t})()}delegateEvents(["click"]);var _tmpl$$5=template("<button>");function BreakButton({index:r}){const i=l=>{const t=breakInstallments()===l?-1:l;setBreakInstallments(t),calculateForm()},s=()=>{const l=breakInstallments();switch(l){case-1:return" x ";case r:return" ... ";default:return r>l?"":" x "}};return(()=>{var l=getNextElement(_tmpl$$5);return l.$$click=()=>i(r),insert(l,()=>`${s()}`),runHydrationEvents(),l})()}delegateEvents(["click"]);var _tmpl$$4=template('<thead><tr class=bg-slate-700><td class="w-12 p-3">Month</td><td class="w-22 bg-green-700">Net</td><td class="w-22 bg-red-700">Tax</td><td class="w-22 bg-sky-700">Gross</td><td class="w-22 bg-yellow-950">Invested</td><td class="w-22 bg-green-800">Interest</td><td class=bg-green-950>Total');function THead(){return getNextElement(_tmpl$$4)}var _tmpl$$3=template('<div class="w-full mb-3 md:grid-cols-2"><div class="flex border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-900 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"><label class=p-2.5>One line calculator</label><input class="flex-auto bg-transparent text-gray-400 text-sm text-right p-2.5 dark:bg-transparent dark:placeholder-gray-100 dark:text-white outline-none"placeholder=0><div class="min-w-28 p-2.5 text-base dark:text-gray-400">= <!$><!/>');function OneLineCalculator(){const[calc,setCalc]=createSignal(0),handleInputChange=e=>{const{target:{value}}=e;try{const result=eval(value)||0;setCalc(result)}catch(r){setCalc("Err")}},handleOnKeyUp=r=>{r.keyCode===13&&handleInputChange(r)};return(()=>{var r=getNextElement(_tmpl$$3),i=r.firstChild,s=i.firstChild,l=s.nextSibling,t=l.nextSibling,n=t.firstChild,a=n.nextSibling,[d,x]=getNextMarker(a.nextSibling);return l.$$keyup=handleOnKeyUp,l.addEventListener("blur",handleInputChange),insert(t,()=>`${calc()}`,d,x),runHydrationEvents(),r})()}delegateEvents(["keyup"]);var _tmpl$$2=template('<div class=px-4><table class="w-full border-b-stone-300 border-b-2"><!$><!/><tbody><tr><td class=p-3></td><td class=text-green-400></td><td class=text-red-400></td><td class=text-sky-400></td><td class=text-yellow-400></td><td class=text-green-600></td><td class=text-green-700>'),_tmpl$2$1=template('<div><div class="px-4 pt-2"></div><!$><!/>');let shouldShowBanner=!1;function TopBanner(){const[r,i]=createSignal(shouldShowBanner);try{window.addEventListener("scroll",l=>{const t=document.getElementById("results");if(!t)return;const n=t.offsetTop<window.scrollY;shouldShowBanner!==n&&(i(n),shouldShowBanner=n,console.log(n))})}catch{console.log("ssr")}const s=()=>{const l=results();if(!l.length)return"";const t=l[0],{row:n,balance:a,info:d}=t,{net:x,incometax:p,gross:u}=a,{total:o,interest:m,invested:g}=d;return(()=>{var $=getNextElement(_tmpl$$2),b=$.firstChild,v=b.firstChild,[_,f]=getNextMarker(v.nextSibling),h=_.nextSibling,k=h.firstChild,y=k.firstChild,C=y.nextSibling,S=C.nextSibling,w=S.nextSibling,E=w.nextSibling,I=E.nextSibling,B=I.nextSibling;return insert(b,createComponent(THead,{}),_,f),insert(y,n),insert(C,()=>c(x)),insert(S,()=>c(p)),insert(w,()=>c(u)),insert(E,()=>c(g)),insert(I,()=>c(m)),insert(B,()=>c(o)),$})()};return(()=>{var l=getNextElement(_tmpl$2$1),t=l.firstChild,n=t.nextSibling,[a,d]=getNextMarker(n.nextSibling);return insert(t,createComponent(OneLineCalculator,{})),insert(l,s,a,d),createRenderEffect(()=>className(l,`
                fixed
                top-0
                right-0
                w-full
                block
                bg-black
                ${r()?"":"hidden"}
            `)),l})()}var _tmpl$$1=template("<div class=flex><table id=results class=flex-1><!$><!/><tbody>"),_tmpl$2=template("<tr class=odd:bg-slate-900><td class=p-3></td><td class=text-green-400></td><td class=text-red-400></td><td class=text-sky-400></td><td class=text-yellow-400><!$><!/><!$><!/><!$><!/></td><td class=text-green-600></td><td class=text-green-700>");function Info(){return[createComponent(TopBanner,{}),(()=>{var r=getNextElement(_tmpl$$1),i=r.firstChild,s=i.firstChild,[l,t]=getNextMarker(s.nextSibling),n=l.nextSibling;return insert(i,createComponent(THead,{}),l,t),insert(n,createComponent(For,{get each(){return results()},children:(a,d)=>(()=>{var x=getNextElement(_tmpl$2),p=x.firstChild,u=p.nextSibling,o=u.nextSibling,m=o.nextSibling,g=m.nextSibling,$=g.firstChild,[b,v]=getNextMarker($.nextSibling),_=b.nextSibling,[f,h]=getNextMarker(_.nextSibling),k=f.nextSibling,[y,C]=getNextMarker(k.nextSibling),S=g.nextSibling,w=S.nextSibling;return insert(p,()=>a.row),insert(u,()=>c(a.balance.net)),insert(o,()=>c(a.balance.incometax)),insert(m,()=>c(a.balance.gross)),insert(g,()=>c(a.info.invested),b,v),insert(g,createComponent(TransactionButton,{get index(){return a.row}}),f,h),insert(g,createComponent(BreakButton,{get index(){return a.row}}),y,C),insert(S,()=>c(a.info.interest)),insert(w,()=>c(a.info.total)),x})()})),r})()]}var _tmpl$=template('<main class=text-white><!$><!/><h1 class="mb-4 text-4xl font-extrabold leading-none tracking-tight text-gray-900 md:text-5xl lg:text-6xl dark:text-white">Compound Insterest Calculator</h1><!$><!/><div><header><form><div class="grid gap-6 mb-6 md:grid-cols-5"><!$><!/><!$><!/><!$><!/><!$><!/><!$><!/></div></form><!$><!/>');function HomeView(){const r=s=>l=>{const t=form(),{value:n}=l.target;n&&(setForm({...t,[s]:+n||0}),calculateForm())},i=s=>{setForm({...form(),period:s}),calculateForm()};return(()=>{var s=getNextElement(_tmpl$),l=s.firstChild,[t,n]=getNextMarker(l.nextSibling),a=t.nextSibling,d=a.nextSibling,[x,p]=getNextMarker(d.nextSibling),u=x.nextSibling,o=u.firstChild,m=o.firstChild,g=m.firstChild,$=g.firstChild,[b,v]=getNextMarker($.nextSibling),_=b.nextSibling,[f,h]=getNextMarker(_.nextSibling),k=f.nextSibling,[y,C]=getNextMarker(k.nextSibling),S=y.nextSibling,[w,E]=getNextMarker(S.nextSibling),I=w.nextSibling,[B,F]=getNextMarker(I.nextSibling),H=m.nextSibling,[P,O]=getNextMarker(H.nextSibling);return insert(s,createComponent(Title,{children:"Interest calculator"}),t,n),insert(s,createComponent(OneLineCalculator,{}),x,p),insert(g,createComponent(NumberInput,{min:0,get value(){return form().initial},required:!0,label:"Initial investment",get onKeyUp(){return r("initial")}}),b,v),insert(g,createComponent(NumberInput,{min:0,get value(){return form().installment},required:!0,label:"Installment",get onKeyUp(){return r("installment")}}),f,h),insert(g,createComponent(NumberInput,{min:0,get value(){return form().interest},required:!0,label:"Interest yearly %",suffix:"%",step:".01",get onKeyUp(){return r("interest")}}),y,C),insert(g,createComponent(NumberInput,{min:0,get value(){return form().period},required:!0,label:"Period",onChange:i,select:initialPeriodOptions}),w,E),insert(g,createComponent(NumberInput,{min:0,get value(){return form().incomeTax},required:!0,label:"Income tax %",step:".01",get onKeyUp(){return r("incomeTax")}}),B,F),insert(o,createComponent(Info,{}),P,O),createRenderEffect(N=>{var T=styles.App,M=styles.header;return T!==N.e&&className(u,N.e=T),M!==N.t&&className(o,N.t=M),N},{e:void 0,t:void 0}),s})()}function Home(){return createComponent(HomeView,{})}export{Home as default};
